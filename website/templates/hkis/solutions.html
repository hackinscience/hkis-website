{% extends "hkis/layout.html" %}
{% load hkis_extra %}
{% load i18n static %}
{% block title %}{{ object.title }}{% endblock %}

{% block stylesheets %}
  <link href="{% static "css/codehilite.css" %}" rel="stylesheet" type="text/css" />
  <link href="{% static "django_ace/widget.css" %}" type="text/css" media="screen" rel="stylesheet">
{% endblock %}

{% block extrajs %}
  <script type="text/javascript" src="{% static "django_ace/ace/ace.js" %}"></script>
  <script type="text/javascript" src="{% static "django_ace/widget.js" %}"></script>
  <script type="text/javascript" src="{% static "django_ace/ace/mode-python.js" %}"></script>
  <script type="text/javascript" src="{% static "django_ace/ace/theme-twilight.js" %}"></script>
  <script src="{% static "js/tab.js" %}"></script>
{% endblock %}

{% block container %}
<h1 {{ object.title }} </h1>
<h2 style="margin-top: 20px;">{% trans "Shared solutions" %}</h2>

{% if solutions %}
  <ul class="nav nav-tabs" id="solutions" role="tablist">
      {% for solution in solutions %}
      <li class="nav-item">
        <a class="nav-link{% if forloop.counter == 1 %} active{% endif %}"
           id="sol-{{forloop.counter}}-tab"
           data-toggle="tab"
           href="#sol-{{forloop.counter}}"
           role="tab"
           aria-controls="sol-{{forloop.counter}}"
           aria-selected="{% if forloop.counter == 1 %}true{% else %}false{% endif %}">
              {{ forloop.counter }}
          </a>
      </li>
      {% endfor %}
  </ul>
  <div class="tab-content" id="solutions">
      {% for solution in solutions %}
      <div class="tab-pane fade{% if forloop.counter == 1 %} show active{% endif %}"
           id="sol-{{forloop.counter}}"
           role="tabpanel"
           aria-labelledby="sol-{{forloop.counter}}-tab">
        <br/>
        <p>
          {% blocktrans with username=solution.user.username date=solution.created_at.date %}Solution shared by {{ username }} on {{ date }}:{% endblocktrans %}
        </p>

        <div class="django-ace-editor">
          <div class="django-ace-widget loading" data-fontsize="16px" data-mode="python" data-showinvisibles="false" data-showprintmargin="true" data-theme="twilight" data-usesofttabs="true" style="width:100%; height:400px"><div></div>
          </div>
          <textarea name="source_code" cols="40" rows="10" id="id_source_code_{{ forloop.counter }}">{{ solution.source_code }}</textarea>
        </div>
      </div>
      {% endfor %}
  </div>
{% endif %}

{% endblock %}
